<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head>

<body>
<div th:fragment="sidebar-manager" class="body-sidebar">
    <div class="header" style="background: black; padding: 10px">
        <div class="logo" style="margin-left: 30px; display: flex">
            <img src="/img/logo.png" alt="NutriMeal" style="height: 60px;">
            <h2 class="text-white mb-0" style="margin-left:10px; color: white; font-size: 20px;">NutriMeal</h2>
        </div>
        <div class="search-bar">
            <button id="toggle-sidebar" style="margin-left: 100px; padding: 16px; border: none; background-color: black; color: white; font-size: 20px; border-radius: 8px;">
                <i class="bi bi-list" style="font-size: 24px;"></i>
            </button>
            <input type="search" id="searchInput" placeholder="Search now" style="width: 500px;">
        </div>
        <div class="user-info">
            <img th:src="${#authentication.principal.image}" alt="User Image">
            <div class="user-details">
                <a th:href="@{/profile/account}" style="text-decoration-line: none;">
                    <p style="color: lightgray; margin-top: 10px">Xin Chào <span class="user-name" th:text="${#authentication.principal.fullName}"></span></p>
                </a>
                <a th:href="@{/logout}" class="logout" style="margin-top: -10px; font-size: 15px;">Đăng xuất</a>
            </div>
        </div>
    </div>
    <div class="sidebar" id="sidebar">
        <ul>
            <li><a th:href="@{/manager}"><i class="bi bi-grid"></i> <span class="sidebar-text">Dashboard</span></a></li>
            <li><a href="#"><i class="bi bi-person"></i> <span class="sidebar-text">Quản lí khách hàng</span></a></li>
            <li class="has-submenu">
                <a href="#"><i class="bi bi-file-earmark-text"></i><span class="sidebar-text">Quản lí thực đơn</span> <i class="bi bi-chevron-down submenu-toggle sidebar-text"></i></a>
                <ul class="submenu">
                    <li><a th:href="@{/manager/dailymenu}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i> Thực đơn hàng ngày</a></li>
                    <li><a th:href="@{/manager/dish}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i> Món ăn</a></li>
                    <li><a th:href="@{/manager/combo}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i> Combo</a></li>
                </ul>
            </li>
            <li class="has-submenu">
                <a href="#"><i class="bi bi-card-checklist"></i><span class="sidebar-text">Quản lí đơn hàng</span> <i class="bi bi-chevron-down submenu-toggle sidebar-text"></i></a>
                <ul class="submenu">
                    <li><a href="#"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Xác nhận đơn hàng</a></li>
                    <li><a href="#"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Danh sách đơn hàng</a></li>
                </ul>
            </li>
            <li class="has-submenu">
                <a href="#"><i class="bi bi-truck"></i><span class="sidebar-text">Quản lí đơn giao</span> <i class="bi bi-chevron-down submenu-toggle sidebar-text"></i></a>
                <ul class="submenu">
                    <li><a th:href="@{/manager/delivery/notdelivered}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Đơn chưa giao</a></li>
                    <li><a th:href="@{/manager/delivery/intransit}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Đơn đang giao</a></li>
                    <li><a th:href="@{/manager/delivery/delivered}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Đơn giao thành công</a></li>
                    <li><a th:href="@{/manager/delivery/deliveryfailed}"><i class="bi bi-circle-fill" style="font-size: 0.5em; color: #6c757d"></i>Đơn giao thất bại</a></li>
                </ul>
            </li>
            <li><a href="#"><i class="bi bi-table"></i> <span class="sidebar-text">Quản lí chi tiêu</span></a></li>
            <li><a href="#"><i class="bi bi-star"></i> <span class="sidebar-text">CTKM</span></a></li>
        </ul>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Sidebar toggle functionality
    document.getElementById('toggle-sidebar').addEventListener('click', function() {
        var sidebar = document.getElementById('sidebar');
        var content = document.getElementById('content');
        sidebar.classList.toggle('collapsed');
        content.classList.toggle('collapsed');
    });

    document.addEventListener('DOMContentLoaded', function() {
        var submenuToggles = document.querySelectorAll('.has-submenu > a');
        submenuToggles.forEach(function(submenuToggle) {
            submenuToggle.addEventListener('click', function(e) {
                e.preventDefault();
                var submenu = this.nextElementSibling;
                submenu.classList.toggle('open');
            });
        });
    });


    document.getElementById('searchInput').addEventListener('input', function() {
        currentPage = 1;
        displayTable();
        setupPagination();
    });
</script>
</body>

</html>
