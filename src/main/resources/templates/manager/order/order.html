<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nhận đơn </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
</head>
<style>
    body {
        /*background-color: #e5e5e5;*/
    }
    .content {
        margin-left: 250px;
        padding: 80px 20px 20px;
        transition: margin-left 0.3s ease;
    }
    .content.collapsed {
        margin-left: 60px;
    }
    h2 {
        text-align: center;
        margin: 20px 0;
        font-weight: 500;
    }
    .table-hover {
        width: 100%;
        border-collapse: collapse;
    }
    .table-hover th, .table-hover td {
        padding: 12px;
        text-align: left;
        border: 1px solid #ddd;
    }
    .table-hover tr:hover {
        background-color: #f1f1f1;
    }
    .table-hover th {
        background-color: #f2f2f2;
        cursor: pointer;
    }
    .bbb {
        margin-right: 5px;
    }


    .btn-danger:hover {
        background-color: red !important;
        font-weight: 600;
    }

    .orderManager-h2 {
        text-align: center;
    }

    .beo1 {
        border: 1px solid rgb(255, 2, 2);
    }

    .beo1:hover {
        background-color: rgb(255, 2, 2);
        border: 1px solid rgb(255, 2, 2);
    }

    .beo1 a {
        text-decoration: none;
        color: #fff;
    }

    .me-1 {
        background-color: #343a40;
        border: 1px solid #343a40;
    }

    .me-1:hover {
        background-color: #000000;
        font-weight: 600;
        border: 1px solid #343a40;
    }

    .me-1 a {
        text-decoration: none;
        color: #fff;
    }

    .order-content {
        border-radius: 5px;
    }


</style>



<body>
<div th:insert="fragments/sidebar :: sidebar-manager"></div>

<div class="content" id="content">
    <div class="container-fluid">
            <!-- Content for managing orders -->
            <div id="content-view" class="order-content">
                <h2 class="orderManager-h2">Xác nhận đơn hàng</h2>
                <!-- Add content for viewing and accepting orders -->
                <table class="table  table-hover">
                    <thead class="">
                    <tr style="text-align: center;">
                        <th>ID</th>
                        <th>Người đặt</th>
                        <th>Địa chỉ</th>
                        <th>Ghi chú</th>
                        <th>Ngày đặt</th>
                        <th>Tổng tiền</th>
                        <th>Trạng thái</th>
                        <th colspan="2">Action</th>
                    </tr>
                    </thead>
                    <tr style="text-align: center; vertical-align: middle;" th:each="order : ${ordersProcessing}">
                        <form th:action="@{/manager/processingorder}" method="post">
                            <td th:text="${order.orderId}"></td>
                            <td th:text="${order.user.fullName}"></td>
                            <td th:text="${order.address.fullAddress}"></td>
                            <td th:text="${order.orderNote}"></td>
                            <td th:text="${order.orderDate}"></td>
                            <td th:text="${order.orderTotalPrice}"></td>
                            <td th:text="${order.orderStatus}"></td>
                            <td>
                                <input type="hidden" name="orderId" th:value="${order.orderId}">
                                <input type="hidden" name="status" value="SHIPPED">
                                <button type="submit" class="btn btn-info btn-sm me-1"
                                        style="float:left; margin-left: 13px; color: #fff;">
                                    Nhận đơn
                                </button>
                            </td>
                        </form>
                        <form th:action="@{/manager/processingorder}" method="post"
                              onsubmit="return confirm('Are you sure you want to delete this todo?');">
                            <input type="hidden" name="orderId" th:value="${order.orderId}">
                            <input type="hidden" name="status" value="CANCELLED">
                            <td>
                                <button type="submit" class="btn btn-danger btn-sm beo1"
                                        style="background-color: #ff2033">
                                    Xóa đơn
                                </button>
                            </td>
                        </form>
                    </tr>
                </table>
            </div>

    </div>
</div>
<!-- Bootstrap core JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>


<script>
    document.getElementById('toggle-sidebar').addEventListener('click', function() {
        var sidebar = document.getElementById('sidebar');
        var content = document.getElementById('content');
        sidebar.classList.toggle('collapsed');
        content.classList.toggle('collapsed');
    });

    document.addEventListener('DOMContentLoaded', function() {
        var submenuToggles = document.querySelectorAll('.has-submenu > a');
        submenuToggles.forEach(function(submenuToggle) {
            submenuToggle.addEventListener('click', function(e) {
                e.preventDefault();
                var submenu = this.nextElementSibling;
                submenu.classList.toggle('open');
            });
        });
    });
    function updateCell(element) {
        // Update the cell with the selected option's text
        const selectedText = element.textContent;
        const navLink = element.closest('.dropdown').querySelector('.nav-link');
        navLink.textContent = selectedText;

        // Reopen the dropdown
        const dropdown = new bootstrap.Dropdown(navLink);
        dropdown.show();
    }

    // Add click event listeners to the list items
    document.getElementById('view-orders').addEventListener('click', function () {
        window.location.href = this.querySelector('a').href;
    });

    document.getElementById('manage-delivery').addEventListener('click', function () {
        window.location.href = this.querySelector('a').href;
    });

    document.getElementById('change-status').addEventListener('click', function () {
        window.location.href = this.querySelector('a').href;
    });
</script>
</body>

</html>